<queries>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <region name = "USA"/>
      <supplyDemandQuery title = "primary energy consumption by region (direct equivalent)">
         <axis1 name = "fuel">input[@name]</axis1>
         <axis2 name = "Year">demand-physical[@vintage]</axis2>
         <xPath buildList = "true" dataName = "input" group = "false" sumAll = "false">
            <![CDATA[
            declare function local:append-heirarchy($parent as node(), $append as node()) as node() {
            let $scn := $parent/ancestor::scenario,
            $rgn := $parent/ancestor::region
            return
            document { element scenario {
            $scn/@*,
            element region {
            $rgn/@*,
            $append
            }
            }
            }
            };  
            declare function local:get-primary-renewable($outputs as node()*) as node()* {
            unordered { 	
            for $output in $outputs 
            let $new_output :=  
            element input {
            attribute type {'input'},
            attribute name {$output/parent::*/following-sibling::keyword/@primary-renewable},
            element demand-physical {
            attribute vintage {$output/@vintage},
            attribute unit {$output/@unit},
            text { $output }
            }
            },
            $new_root := local:append-heirarchy($output/parent::*/parent::*, $new_output)
            return $new_root//text()
            } 
            };
            declare function local:run-primary-energy($scenarios as xs:string*, $regions as xs:string*, $collection as xs:string) as node()* { 	
            let $regionsG := if(not($regions[1] = 'Global'))
            then $regions
            else distinct-values(collection($collection)/scenario/world/*[@type='region']/@name)
            return
            for $scenario in $scenarios, 	    
            $region in $regionsG 	
            let $scenario_split := tokenize($scenario, ' '), 	    
            $scenario_name := string-join($scenario_split[position() < last()], ' '),
            $scenario_date := $scenario_split[last()],
            $currTree := collection($collection)/scenario[@name = $scenario_name and @date = $scenario_date]/world/*[@type = 'region' and @name=$region]
            return (: get renewables from electricity :)
            local:get-primary-renewable($currTree/*[@type='sector' (: collapse :) and (@name='electricity' or @name='base load generation' or @name='intermediate generation' or @name='subpeak generation' or @name='peak generation' or @name='elect_td_bld' or starts-with(@name,'elec_'))]//keyword[fn:exists(@primary-renewable)]/preceding-sibling::output-primary/physical-output)
            | (: get renewables from H2ProdCS :)
            local:get-primary-renewable($currTree/supplysector[@name='H2 central production'](: /*[@type='subsector' (: collapse :) and fn:not(@name='electrolysis')] :)//keyword[fn:exists(@primary-renewable)]/preceding-sibling::output-primary/physical-output)
            | (: get renewables from H2ProdDist :)
            local:get-primary-renewable($currTree/supplysector[@name='H2 forecourt production'](: /*[@type='subsector' (: collapse :) and fn:not(@name='electrolysis')] :)//keyword[fn:exists(@primary-renewable)]/preceding-sibling::output-primary/physical-output)
            | (: get the primaries :)
            $currTree//keyword[fn:exists(@primary-consumption)]/preceding-sibling::input-energy/demand-physical/text()
            | (: get traditional biomass :)
            $currTree//*[@type='input' and @name='traditional biomass']/demand-physical/node()
            
            }; 
            local:run-primary-energy((:scenarios:), (:regions:), (:collection:))
            ]]>
         </xPath>
         <comments/>
         <labelRewriteList append-values = "false">
            <level name = "input">
               <rewrite from = "traditional biomass" to = "j traditional biomass"/>
               <rewrite from = "geothermal-elect" to = "i geothermal"/>
               <rewrite from = "biomass" to = "d biomass"/>
               <rewrite from = "total biomass" to = "d biomass"/>
               <rewrite from = "nuclear-H2" to = "e nuclear"/>
               <rewrite from = "natural gas" to = "b natural gas"/>
               <rewrite from = "wind-elect" to = "g wind"/>
               <rewrite from = "exotic-elect" to = "j breakthrough"/>
               <rewrite from = "elect_td_ind" to = ""/>
               <rewrite from = "k new" to = "k new"/>
               <rewrite from = "solar-elect" to = "h solar"/>
               <rewrite from = "solar-H2" to = "h solar"/>
               <rewrite from = "regional natural gas" to = ""/>
               <rewrite from = "coal" to = "c coal"/>
               <rewrite from = "crude oil" to = "a oil"/>
               <rewrite from = "hydro-elect" to = "f hydro"/>
               <rewrite from = "nuclear-elect" to = "e nuclear"/>
               <rewrite from = "traded unconventional oil" to = "a oil"/>
               <rewrite from = "wind-H2" to = "g wind"/>
               <rewrite from = "seawater" to = ""/>
               <rewrite from = "water_td_pri_C" to = ""/>
               <rewrite from = "water_td_pri_W" to = ""/>
            </level>
         </labelRewriteList>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "elec gen by gen tech">
         <axis1 name = "technology">technology</axis1>
         <axis2 name = "Year">physical-output[@vintage]</axis2>
         <xPath buildList = "true" dataName = "output" group = "false" sumAll = "false">
            *[@type='sector' (:collapse:) and (@name='electricity' or 
            @name='base load generation' or @name='intermediate generation' or @name='subpeak generation' or @name='peak generation' or 
            @name='elect_td_bld' or @name='industrial energy use')]/
            *[@type='subsector']/*[@type='technology' and not (@name='electricity' or @name='elect_td_bld')]/
            *[@type='output' (:collapse:) and (@name='electricity' or @name='base load generation' or @name='intermediate generation' or 
            @name='subpeak generation' or @name='peak generation' or @name='elect_td_bld')]/
            physical-output/node()
         </xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "cogeneration by region">
         <axis1 name = "region">region</axis1>
         <axis2 name = "Year">physical-output[@vintage]</axis2>
         <xPath buildList = "true" dataName = "output" group = "false" sumAll = "false">
            *[@type='sector' (:collapse:)]//*[@type='technology' (:collapse:)]/
            output-secondary[@name='electricity' and @type='output']/
            physical-output/node()
         </xPath>
         <comments>all techs of the same name aggregated</comments>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "building final energy by tech">
         <axis1 name = "technology">technology</axis1>
         <axis2 name = "Year">demand-physical[@vintage]</axis2>
         <xPath buildList = "true" dataName = "input" group = "false" sumAll = "false">
            *[@type='sector' and (@name='building' or (exists(child::keyword[@final-energy='building'])))]/
            *[@type='subsector']/*[@type='technology']/*[@type='input']/
            demand-physical/node()
         </xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "industry final energy by tech and fuel">
         <axis1 name = "technology">technology</axis1>
         <axis2 name = "Year">demand-physical[@vintage]</axis2>
         <xPath buildList = "true" dataName = "input" group = "false" sumAll = "false">
            *[@type='sector' and (@name='industry' or (exists(child::keyword[@final-energy='industry'])))]/
            *[@type='subsector']/*[@type='technology']/
            *[@type='input' and (@name='delivered biomass' or @name='delivered coal' or
            @name='H2 enduse' or @name='elect_td_ind' or @name='wholesale gas' or
            @name='refined liquids industrial')]/demand-physical/node()
         </xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "transport final energy by tech and fuel">
         <axis1 name = "mode">subsector</axis1>
         <axis2 name = "Year">demand-physical[@vintage]</axis2>
         <xPath buildList = "true" dataName = "input" group = "false" sumAll = "false">
            *[@type='sector' and (@name='transportation' or (exists(child::keyword[@final-energy='transportation'])))]/
            *[@type='subsector']/*[@type='technology']/*[@type='input' and not(@name='renewable')]/
            demand-physical[@unit='EJ']/node()
         </xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "refined liquids production by tech">
         <axis1 name = "technology">technology</axis1>
         <axis2 name = "Year">physical-output[@vintage]</axis2>
         <xPath buildList = "true" dataName = "output" group = "false" sumAll = "false">
            *[@type='sector' and 
            (@name='oil refining' or @name='biomass liquids' or @name='gas to liquids' or @name='coal to liquids')]/*[@type='subsector']/
            *[@type='technology']/output-primary[@type='output' (:collapse:)]/physical-output/node()
         </xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <region name = "USA"/>
      <emissionsQueryBuilder title = "CO2 emissions by tech">
         <axis1 name = "technology">technology</axis1>
         <axis2 name = "Year">emissions</axis2>
         <xPath buildList = "true" dataName = "emissions" group = "false" sumAll = "false">
            *[@type = 'sector' ]/*[@type='subsector']/*[@type='technology']//
            CO2/emissions/node()
         </xPath>
         <comments/>
      </emissionsQueryBuilder>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "building floorspace">
         <axis1 name = "building">gcam-consumer[@name]</axis1>
         <axis2 name = "Year">floorspace[@year]</axis2>
         <xPath buildList = "true" dataName = "floorspace" group = "false" sumAll = "false">gcam-consumer//floorspace/node()</xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "transport service output by mode">
         <axis1 name = "mode">subsector</axis1>
         <axis2 name = "Year">physical-output[@vintage]</axis2>
         <xPath buildList = "true" dataName = "output" group = "false" sumAll = "false">
            *[@type='sector' and (@name='transportation' or (exists(child::keyword[@final-energy='transportation'])))]/
            *[@type='subsector']//*[@type='output' (:collapse:) and not(@name='CAFEcredit')]/
            physical-output/node()
         </xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <region name = "USA"/>
      <demographicsQuery title = "population by region">
         <axis1 name = "region">region</axis1>
         <axis2 name = "Year">populationMiniCAM</axis2>
         <xPath buildList = "true" dataName = "total-population" group = "false" sumAll = "false">demographics/populationMiniCAM/total-population/node()</xPath>
         <comments/>
      </demographicsQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <region name = "USA"/>
      <gdpQueryBuilder title = "GDP MER by region">
         <axis1 name = "region">region</axis1>
         <axis2 name = "Year">gdp-mer</axis2>
         <xPath buildList = "true" dataName = "gdp-mer" group = "false" sumAll = "false">GDP/gdp-mer/text()</xPath>
         <comments/>
      </gdpQueryBuilder>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "total final energy by sector">
         <axis1 name = "sector">sector</axis1>
         <axis2 name = "Year">demand-physical[@vintage]</axis2>
         <xPath buildList = "true" dataName = "input" group = "false" sumAll = "false">
            *[@type='sector' and ((@name='building' or @name='industry' or @name='transportation') or
            (exists(child::keyword/@final-energy)))]//*[@type='input' (:collapse:) and
            not(@name='limestone' or @name='process heat cement' or @name='industrial energy use' or
            @name='industrial feedstocks' or @name='renewable' or contains(@name, 'trn_') or @name='oil-credits')]/
            demand-physical[@unit='EJ']/node()
         </xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "inputs by tech">
         <axis1 name = "input">input</axis1>
         <axis2 name = "Year">demand-physical[@vintage]</axis2>
         <xPath buildList = "true" dataName = "input" group = "false" sumAll = "false">*[@type='sector']/*[@type='subsector']/*[@type='technology']/*[@type='input']/demand-physical/node()</xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "outputs by tech">
         <axis1 name = "technology">technology[@name]</axis1>
         <axis2 name = "Year">physical-output[@vintage]</axis2>
         <xPath buildList = "true" dataName = "output" group = "false" sumAll = "false">*[@type='sector']/*[@type='subsector']/*[@type='technology']/*[@type='output']/physical-output/node()</xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "elec share-weights by subsector">
         <axis1 name = "subsector">subsector</axis1>
         <axis2 name = "Year">share-weight</axis2>
         <xPath buildList = "true" dataName = "price" group = "false" sumAll = "false">
            *[@type='sector' and (@name='electricity' or @name='base load generation' or 
            @name='intermediate generation' or @name='subpeak generation' or @name='peak generation' or @name='elect_td_bld')]/
            *[@type='subsector' and not (@name='elect_td_bld')]/
            share-weight/text()
         </xPath>
         <comments/>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <region name = "AK"/>
      <region name = "AL"/>
      <region name = "AR"/>
      <region name = "AZ"/>
      <region name = "CA"/>
      <region name = "CO"/>
      <region name = "CT"/>
      <region name = "DC"/>
      <region name = "DE"/>
      <region name = "FL"/>
      <region name = "GA"/>
      <region name = "HI"/>
      <region name = "IA"/>
      <region name = "ID"/>
      <region name = "IL"/>
      <region name = "IN"/>
      <region name = "KS"/>
      <region name = "KY"/>
      <region name = "LA"/>
      <region name = "MA"/>
      <region name = "MD"/>
      <region name = "ME"/>
      <region name = "MI"/>
      <region name = "MN"/>
      <region name = "MO"/>
      <region name = "MS"/>
      <region name = "MT"/>
      <region name = "NC"/>
      <region name = "ND"/>
      <region name = "NE"/>
      <region name = "NH"/>
      <region name = "NJ"/>
      <region name = "NM"/>
      <region name = "NV"/>
      <region name = "NY"/>
      <region name = "OH"/>
      <region name = "OK"/>
      <region name = "OR"/>
      <region name = "PA"/>
      <region name = "RI"/>
      <region name = "SC"/>
      <region name = "SD"/>
      <region name = "TN"/>
      <region name = "TX"/>
      <region name = "UT"/>
      <region name = "VA"/>
      <region name = "VT"/>
      <region name = "WA"/>
      <region name = "WI"/>
      <region name = "WV"/>
      <region name = "WY"/>
      <supplyDemandQuery title = "elec gen costs by subsector">
         <axis1 name = "subsector">subsector</axis1>
         <axis2 name = "Year">cost</axis2>
         <xPath buildList = "true" dataName = "cost" group = "false" sumAll = "false">
            *[@type='sector' and (@name='electricity' or @name='base load generation' or 
            @name='intermediate generation' or @name='subpeak generation' or @name='peak generation')]/*[@type='subsector']/cost/text()
         </xPath>
         <comments>doesn't include rooftop PV</comments>
      </supplyDemandQuery>
   </aQuery>
   <aQuery>
      <all-regions/>
      <marketQuery title = "CO2 prices">
         <axis1 name = "market">market</axis1>
         <axis2 name = "Year">market</axis2>
         <xPath buildList = "true" dataName = "price" group = "false" sumAll = "false">Marketplace/market[true() and contains(@name,'CO2')]/price/node()</xPath>
         <comments/>
      </marketQuery>
   </aQuery>
</queries>
